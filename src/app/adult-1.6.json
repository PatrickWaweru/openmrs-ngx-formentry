{
  "name": "ampath_poc_adult_return_visit_form_v1.6",
  "uuid": "xxxx",
  "processor": "EncounterFormProcessor",
  "pages": [
    {
      "label": "Vitals",
      "sections": [
        {
          "label": "Vital Signs",
          "isExpanded": "true",
          "questions": [
            {
              "label": "Weight (Kg):",
              "id": "weight",
              "questionOptions": {
                "rendering": "number",
                "concept": "a8a660ca-1350-11df-a1f1-0026b9348838",
                "max": "250",
                "min": "0"
              },
              "type": "obs",
              "validators": []
            },
            {
              "label": "Height (Cm):",
              "historicalExpression": "_.isEmpty(HD.getObject('prevEnc').getValue('a8a6619c-1350-11df-a1f1-0026b9348838')) ? undefined : HD.getObject('prevEnc').getValue('a8a6619c-1350-11df-a1f1-0026b9348838')",
              "id": "height",
              "questionOptions": {
                "rendering": "number",
                "concept": "a8a6619c-1350-11df-a1f1-0026b9348838"
              },
              "type": "obs",
              "validators": []
            },
            {
              "label": "BMI (Kg/m2):",
              "id": "bmi",
              "questionOptions": {
                "rendering": "number",
                "concept": "a89c60c0-1350-11df-a1f1-0026b9348838",
                "max": "100",
                "min": "0",
                "calculate": {
                  "calculateExpression": "height && weight && fetchData(`https://prod.kenyahmis.org:8500//openmrs/ws/rest/v1/kenyaemr/zscore?sex=${sex}&age=${age}&weight=${weight}&height=${height}`,'wfl_score')"
                }
              },
              "type": "obs",
              "validators": []
            }
          ]
        }
      ]
    }
  ]
}
